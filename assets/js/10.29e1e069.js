(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{356:function(e,r,t){"use strict";t.r(r);var a=t(42),_=Object(a.a)({},(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[e._v("#")]),e._v(" 简介")]),e._v(" "),t("blockquote",[t("p",[e._v("You know, for search (and analysis)")])]),e._v(" "),t("p",[e._v("Elasticsearch 是一个分布式的搜索及分析引擎，是 Elastic Stack 的核心组件。 Logstash 和 Beats 用于收集数据。Kibana 用于数据查询及可视化。")]),e._v(" "),t("p",[e._v("Elasticsearch 面向所有类型的数据提供近实时的搜索分析能力。包括结构化、非结构化的数据、数值型数据、地理（GEO）数据，Elasticsearch 可以高效的存储及索引。")]),e._v(" "),t("p",[e._v("应用场景：")]),e._v(" "),t("ul",[t("li",[e._v("面向 app 或者网站的搜索服务")]),e._v(" "),t("li",[e._v("存储分析日志、监控指标、安全事件等数据")]),e._v(" "),t("li",[e._v("使用机器学习实时对数据进行自动化建模")]),e._v(" "),t("li",[e._v("用于自动化工作流的存储引擎")]),e._v(" "),t("li",[e._v("作为地理信息系统，管理、集成、分析地理位置数据")]),e._v(" "),t("li",[e._v("作为生物信息搜索工具，存储并处理基因数据")])]),e._v(" "),t("p",[e._v("ES 底层基于 "),t("a",{attrs:{href:"https://lucene.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Apache Lucene"),t("OutboundLink")],1),e._v(" 搜索引擎库，数据存储为 "),t("code",[e._v("JSON")]),e._v(" 格式的文档型数据，通过"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95",target:"_blank",rel:"noopener noreferrer"}},[e._v("倒排索引"),t("OutboundLink")],1),e._v("实现高效的全文搜索。")]),e._v(" "),t("p",[e._v("数据查询方面 ES 支持标准的 RESTful API、自定义的 "),t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/8.1/query-dsl.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Query DSL"),t("OutboundLink")],1),e._v(" 以及 "),t("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/8.1/sql-overview.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("SQL"),t("OutboundLink")],1),e._v(" 协议。")]),e._v(" "),t("p",[e._v("关于服务的伸缩与弹性")]),e._v(" "),t("p",[e._v("index 索引作为逻辑分组将数据分到多个物理分片（Shard），冗余存储在多个节点（Node）上。以用于防止单点故障以及可能的数据增长扩容需求，Elasticsearch 会自动迁移分片以重新平衡集群。")]),e._v(" "),t("p",[e._v("ES 的分片（Shard）分为两种类型，primary 主分片以及 replicas 副本分片，主分片的数量在索引创建时就固定了，副本分片可依据需要进行伸缩，不会影响索引及查询等服务。")]),e._v(" "),t("p",[e._v("关于分片大小及主分片的数量配置，需综合考量。分片分的越多，维护索引的开销就越大。分片大小越大，当 Elasticsearch 需要重新平衡集群时，移动分片所需的时间就越长。查询大量小分片会使每个分片的处理速度更快，但更多的查询意味着更多的开销，因此查询较少数量的大分片可能会更快。")]),e._v(" "),t("p",[e._v("官方的建议：")]),e._v(" "),t("ul",[t("li",[e._v("旨在将平均分片大小保持在几 GB 到几十 GB 之间。对于具有基于时间的数据的用例，通常会看到 20GB 到 40GB 范围内的分片。")]),e._v(" "),t("li",[e._v("避免大量碎片问题。一个节点可以容纳的分片数量与可用的堆空间成正比。作为一般规则，每 GB 堆空间的分片数应小于 20。")])]),e._v(" "),t("p",[e._v("关于容灾，为保证连通性，单一集群的节点放在同一数据中心；为保证高可用，可采用跨集群复制（CCR，Cross-cluster replication）的方式将主集群索引数据同步至热备集群，当然热备集群也可以基于地理位置就近面向用户提供只读服务，需要注意的是 CCR 模式，主集群（Leader）处理所有的写操纵，复制节点仅作为 Follower 处理读请求，当主集群出现故障时，可让 follower 集群接管")])])}),[],!1,null,null,null);r.default=_.exports}}]);