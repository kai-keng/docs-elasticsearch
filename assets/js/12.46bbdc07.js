(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{358:function(a,e,s){"use strict";s.r(e);var t=s(42),n=Object(t.a)({},(function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"基本使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本使用"}},[a._v("#")]),a._v(" 基本使用")]),a._v(" "),s("h2",{attrs:{id:"索引-index-管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#索引-index-管理"}},[a._v("#")]),a._v(" 索引 Index 管理")]),a._v(" "),s("ul",[s("li",[a._v("创建索引")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("PUT app/_create\n")])])]),s("h2",{attrs:{id:"文档-doc-crud"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文档-doc-crud"}},[a._v("#")]),a._v(" 文档 doc CRUD")]),a._v(" "),s("h4",{attrs:{id:"单一操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单一操作"}},[a._v("#")]),a._v(" 单一操作")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('# 创建或更新文档（相当于mongodb upsert）- 无论是否需要值更新 都会删除 重新创建 version 值都会变\nPOST users/_doc/1\n{\n  "name": "Mike",\n  "age": 2\n}\n\n# id 查询\nGET users/_doc/1\n\n\n# 更新文档字段 - 值相同时 不执行更新操作 version 值不变\nPOST users/_update/1\n{\n  "doc": {\n    "age": 7\n  }\n}\n')])])]),s("h4",{attrs:{id:"批量操作-bulk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#批量操作-bulk"}},[a._v("#")]),a._v(" 批量操作 _bulk")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('# 批量操作索引文档\nPOST _bulk\n{ "index": { "_index": "users", "_id": 2 } }\n{"name": "Tony", "age": 0}\n{"delete": { "_index": "movies", "_id": "77889900"}}\n')])])]),s("h4",{attrs:{id:"批量读取-mget"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#批量读取-mget"}},[a._v("#")]),a._v(" 批量读取 _mget")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('# 批量读取文档 1\nGET _mget\n{\n  "docs": [\n     { "_index": "users", "_id": 1 },\n     { "_index": "movies", "_id": 1 }\n  ]\n}\n\n# 批量读取文档 2\nGET users/_mget\n{\n  "ids": [1, 2]\n}\n')])])]),s("h4",{attrs:{id:"批量查询-msearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#批量查询-msearch"}},[a._v("#")]),a._v(" 批量查询 _msearch")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('# 批量查询文档\nGET movies/_msearch\n{}\n{ "query" : { "match_all": {} }, "size": 1 }\n{}\n{ "query" : { "match_all": {} }, "from": 1, "size": 1 }\n')])])]),s("h4",{attrs:{id:"一些常见错误"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一些常见错误"}},[a._v("#")]),a._v(" 一些常见错误")]),a._v(" "),s("ul",[s("li",[a._v("无法连接：网络故障或集群故障")]),a._v(" "),s("li",[a._v("连接无法关闭：网络故障或者节点出错")]),a._v(" "),s("li",[a._v("429：集群过于繁忙")])]),a._v(" "),s("h2",{attrs:{id:"mapping-设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mapping-设置"}},[a._v("#")]),a._v(" Mapping 设置")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('PUT /users/_doc/1\n{\n    "name": "Nick",\n    "age": 10,\n    "created_time": "2020-07-01T00:03:59Z"\n}\n\nPUT /users/_mapping\n{\n  "dynamic": "false"\n}\n\nPUT /users/_doc/1\n{\n    "name": "Nick",\n    "age": 10,\n    "from": "shanghai china",\n    "created_time": "2020-07-01T00:03:59Z"\n}\n\nGET /users/_mapping\n\n# 报错 from 字段未建倒排索引 无法查找\nGET /users/_search?q=from:china \n')])])])])}),[],!1,null,null,null);e.default=n.exports}}]);